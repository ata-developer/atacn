<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://java.sun.com/jsf/html"                
                xmlns:p="http://primefaces.org/ui">

    <p:messages />
    <p:panel id="pnlSeleccionarVehiculos" header="#{msj.detallesCliente}">
        <p:fieldset id="fieldSeleccionarVehiculos" legend="#{msj.configurarVehiculo}">
            <p:panelGrid id="pngSeleccionarVehiculo" columns="2" style="width: 400px;">                    
                <p:outputLabel
                    for="@next"
                    value="#{msj.selecccionarMarca}" />
                <p:selectOneMenu
                    id="somSeleccionarVehiculo"
                    required="true"
                    value="#{ordenControlador.marcaVehiculoSeleccionado}"
                    converter="omnifaces.SelectItemsConverter">
                    <f:selectItem itemLabel="#{msj.seleccionar}" value="#{null}" noSelectionOption="true" />
                    <f:selectItems value="#{vehiculoCategoriaAdministracionControlador.generarSelectItemDeMarcaVehiculo()}" />
                    <p:ajax 
                        event="change"
                        process="@this"
                        update="fieldSeleccionarVehiculos tblListaVehiculosPorFabricante mensajeGeneral"
                        listener="#{ordenControlador.cargarListaDeVehiculos()}" />
                </p:selectOneMenu>
            </p:panelGrid>
            <p/>
            <p:dataTable
                id="tblListaVehiculosPorFabricante"
                var="vehiculo"
                value="#{ordenControlador.listaVehiculos}"
                >
                <f:facet name="header">
                    #{msj.listaDeVehiculos}

                </f:facet>

                <p:column filterBy="#{vehiculo.modelo}" headerText="#{msj.descripcionModelo}" filterMatchMode="contains" >
                    <h:outputText value="#{vehiculo.modelo}" />
                </p:column>

                <p:column headerText="#{msj.descripcion}" >
                    <h:outputText value="#{vehiculo.descripcion}" />
                </p:column>

                <p:column headerText="#{msj.numeroFilas}">
                    <h:outputText value="#{vehiculo.numeroDeFilas}" />
                </p:column>

                <p:column headerText="#{msj.anioInicialRango}">
                    <h:outputText value="#{vehiculo.anioDesde}" />
                </p:column>

                <p:column headerText="#{msj.anioFinalRango}">
                    <h:outputText value="#{vehiculo.anioHasta}" />
                </p:column>

                <p:column headerText="#{msj.listaTipoFila}">
                    <c:forEach var="fila" items="#{vehiculoAdministracionControlador.listaFila(vehiculo)}">
                        <h:outputText value="#{fila.tipoFila.tipoFila}" />
                        <p/>
                    </c:forEach>
                </p:column>


                <p:column headerText="#{msj.imagenes}" colspan="3">
                    <p:panelGrid id="pngAdministrarImagenes4" columns="3">
                        <c:forEach var="imagen" items="#{vehiculoAdministracionControlador.listaImagenes(ordenVehiculo.vehiculo)}">
                            <h:outputLink value="MostradorImagen?Image_id=#{imagen.idImagen}" target="_blank" >
                                <h:graphicImage value="MostradorImagen?Image_id=#{imagen.idImagen}" width="100" height="100"></h:graphicImage>
                            </h:outputLink>
                        </c:forEach>
                    </p:panelGrid>
                </p:column> 

                <p:column headerText="#{msj.acciones}">
                    <p:commandButton
                        id="btnGuardar" 
                        value="#{msj.agregar}"
                        update=":frmGenerarOrden:fieldSeleccionarVehiculos mensajeGeneral"
                        action="#{ordenControlador.agregarVehiculo()}" />
                </p:column>

            </p:dataTable>
            <p/>
            <p:dataTable
                id="tblListaVehiculosSeleccionados"                
                var="ordenVehiculo" 
                value="#{ordenControlador.vehiculosCliente}">
                <f:facet name="header">
                    #{msj.listaDeVehiculos}
                </f:facet>

                <p:column headerText="#{msj.descripcionModelo}" >
                    <h:outputText value="#{ordenVehiculo.vehiculo.modelo}" />
                </p:column>

                <p:column headerText="#{msj.descripcion}" >
                    <h:outputText value="#{ordenVehiculo.vehiculo.descripcion}" />
                </p:column>

                <p:column headerText="#{msj.numeroFilas}">
                    <h:outputText value="#{ordenVehiculo.vehiculo.numeroDeFilas}" />
                </p:column>

                <p:column headerText="#{msj.anioInicialRango}">
                    <h:outputText value="#{ordenVehiculo.vehiculo.anioDesde}" />
                </p:column>

                <p:column headerText="#{msj.anioFinalRango}">
                    <h:outputText value="#{ordenVehiculo.vehiculo.anioHasta}" />
                </p:column>

                <p:column headerText="#{msj.listaTipoFila}">
                    <c:forEach var="fila" items="#{vehiculoAdministracionControlador.listaFila(ordenVehiculo.vehiculo)}">
                        <h:outputText value="#{fila.tipoFila.tipoFila}" />
                        <p/>
                    </c:forEach>
                </p:column>

                <p:column headerText="#{msj.imagenes}" colspan="3">
                    <p:panelGrid id="pngAdministrarImagenes4" columns="3">
                        <c:forEach var="imagen" items="#{vehiculoAdministracionControlador.listaImagenes(ordenVehiculo.vehiculo)}">
                            <h:outputLink value="MostradorImagen?Image_id=#{imagen.idImagen}" target="_blank" >
                                <h:graphicImage value="MostradorImagen?Image_id=#{imagen.idImagen}" width="100" height="100"></h:graphicImage>
                            </h:outputLink>
                        </c:forEach>
                    </p:panelGrid>
                </p:column>

            </p:dataTable>
        </p:fieldset>
        <p/>
    </p:panel>
</ui:composition>