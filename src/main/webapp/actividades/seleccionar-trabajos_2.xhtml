<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://java.sun.com/jsf/html"                
                xmlns:p="http://primefaces.org/ui">

    <p:messages />
    <p:panel id="pnlSeleccionarVehiculosTrabajo" header="#{msj.seleccionarTrabajo}">
        <p:fieldset legend="#{msj.seleccionar}">
            <p:panelGrid id="pngSeleccionarVehiculosTrabajo" columns="3"> 
                <p:outputLabel
                    for="@next"
                    value="#{msj.seleccionarVehiculo}" />
                <p:selectOneMenu
                    id="somSeleccionarVehiculoParaTrabajo"
                    value="#{ordenControlador.vehiculoParaTrabajos}"
                    converter="omnifaces.SelectItemsConverter">
                    <f:selectItem itemLabel="#{msj.seleccionar}" value="#{null}" noSelectionOption="true" />
                    <f:selectItems value="#{ordenControlador.generarSelectItemDeVehiculosParaTrabajo()}" />
                    <p:ajax                             
                        event="itemSelect"                            
                        update="pnlSeleccionarVehiculosTrabajo mensajeGeneral"
                        listener="#{ordenControlador.cargarPreciosVehiculo()}" />
                </p:selectOneMenu>
                <p:outputLabel
                    value="" />
                <p:outputLabel
                    value="Vehiculo seleccionado: " />
                <p:outputLabel
                    value="#{ordenControlador.vehiculoParaTrabajos.vehiculo.modelo}"/>
                <p:outputLabel
                    value="" />
            </p:panelGrid>
            <p:panelGrid id="pngSeleccionarTrabajo" >
                <p:row>
                    <p:column>
                        <p:outputLabel
                            value="#{msj.seleccionarTrabajo} **" />
                    </p:column>
                    <p:column>
                        <p:selectOneMenu
                            id="somSeleccionarTrabajoParaAuto"
                            value="#{ordenControlador.trabajoCategoriaPrecio}"
                            required="true"
                            converter="omnifaces.SelectItemsConverter">
                            <f:selectItem itemLabel="#{msj.seleccionar}" value="#{null}" noSelectionOption="true" />
                            <f:selectItems value="#{ordenControlador.generarSelectItemDeTrabajosParaVehiculoSeleccionado()}" />
                            <p:ajax                             
                                event="itemSelect"                            
                                update="mensajeGeneral"
                                listener="#{ordenControlador.testTrabajoSeleccionado()}" />
                        </p:selectOneMenu> 
                    </p:column>
                    <p:column>
                        <p:commandButton
                            id="btnAgregarTrabajo" 
                            value="#{msj.agregar}"
                            process="pnlSeleccionarVehiculosTrabajo @this"
                            update="pnlSeleccionarVehiculosTrabajo mensajeGeneral"
                            action="#{ordenControlador.agregarTrabajo(trabajoCategoriaPrecio)}" />
                    </p:column>
                </p:row>
                <c:forEach var="vehiculoTrabajo" items="#{ordenControlador.listaVehiculoTrabajo}">
                    <p:row>
                        <p:column colspan="3">test test test</p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="#{vehiculoTrabajo.trabajoDescripcion}" />
                        </p:column>
                        <p:column>
                            <p:selectOneMenu
                                id="somSeleccionarTrabajoPartes"
                                value="#{ordenControlador.trabajoCategoriaPrecio}"
                                converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemLabel="#{msj.seleccionar}" value="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{ordenControlador.listaTrabajosPorParte}" />
                            </p:selectOneMenu>
                        </p:column>
                        <p:column>
                            <p:commandButton
                                id="btnAgregarTrabajo2" 
                                value="#{msj.agregar}"
                                process="@this "
                                action="#{ordenControlador.eliminarTrabajo(vehiculoTrabajo)}" />
                        </p:column>
                    </p:row>
                </c:forEach>
            </p:panelGrid>
        </p:fieldset>
        <p/>

    </p:panel>
</ui:composition>